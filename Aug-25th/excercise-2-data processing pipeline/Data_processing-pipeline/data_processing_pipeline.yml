trigger:
  - main # Triggers when code is pushed to the main branch
pool:
  vmImage: ubuntu-latest
steps:
# Step 1: Checkout the repository
  - task: Checkout@1
# Step 2: Set up Python
  - task: UsePythonVersion@0
    inputs:
    versionSpec: '3.10'
    addToPath: true
# Step 3: Install dependencies
  - script: |
      python -m pip install --upgrade pip
      pip install -r data_pipeline/requirements.txt
    displayName: 'Install dependencies'
# Step 4: Run the data fetcher
  - script: |
      cd data_pipeline
      python Data_preparation_processing.py
    displayName: 'running processign file'

# Step 6: Publish the processed file as an artifact
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: 'Data/cleaned_sales_data.csv'

      ArtifactName: 'ProcessedData'
      publishLocation: 'Container'